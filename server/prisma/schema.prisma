generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model Admin {
  id           String   @id @default(uuid())
  username     String
  email        String
  password     String?
  authType     AuthType
  refreshToken String?
  createdAt    DateTime @default(now())
  updatedAt    DateTime @default(now()) @updatedAt()
}

model Page {
  id     String @id @default(uuid())
  title  String
  slug   String @unique
  html   String
  css    String
  js     String
  status String

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt()

  assets Assets[]

  @@index([id])
  @@index([slug])
}

model Assets {
  id     String @id @default(uuid())
  type   String
  url    String
  pageId String

  page Page @relation(fields: [pageId], references: [id], onDelete: Cascade)

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt()

  @@index([id])
  @@index([pageId])
}

enum AuthType {
  oauth
  manual
}
